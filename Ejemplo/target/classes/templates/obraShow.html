{{>header}}
<meta charset="utf-8" />
<div class="content">
	<!-- Data Container -->
	<div class="container-fluid">
		<div class="row">


			<!--Input Data-->
			<div class="col-md-10">
				<div class="card">
					<div class="card-header card-header-primary">
						<h4 class="card-title">Obra</h4>
						<p class="card-category">Datos de la Obra</p>
					</div>
					<div class="card-body">

						<!--Form action="guardar" method="post"-->

						<form id="editarObras">

							<!--Input title-->
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<!--<input type="text" class="form-control" disabled> -->
										<input type='text' class="form-control" name="title"
											id="title" value="{{title}}" disabled>
									</div>
								</div>
							</div>

							<!--Input URL Cover -->
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<label class="bmd-label-floating">{{URL}}</label>
										<!--<input type="text" class="form-control" disabled>-->
										<input type='text' class="form-control" name="URL" id="url"
											disabled />
									</div>
								</div>
							</div>

							<!--Input Calendar-->
							<div class="row">
								<div class="col-md-12">
									<label class="bmd-label-floating"> Fecha de
										publicaciÃ³n: </label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-1"></div>
								<div class="col-md-11">
									<div class="form-group">
										<label class="bmd-label-floating">{{date}}</label> <input
											type='text' class="form-control" name="date" id="date"
											disabled />
									</div>
								</div>
							</div>


							<!--Input Editorial-->
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<label class="bmd-label-floating">{{editorial}}</label> <input
											type='text' class="form-control" name="editorial"
											id="editorial" disabled />
										<!--  <input type="text" class="form-control" disabled>-->
									</div>
								</div>
							</div>

							<!--Input URL  -->
							<div class="row" style="padding-bottom: 2.5em;">
								<div class="col-md-12">
									<div class="form-group">
										<label class="bmd-label-floating">{{url_editorial}}</label>
										<!--  <input type="text" class="form-control" disabled>-->
										<input type='text' class="form-control" name="url_editorial"
											id="urlEdi" disabled />
									</div>
								</div>
							</div>
							<!-- <button type='submit' class="btn btn-primary" onclick="window.location.href='obraShowEdit'">Editar </button>-->
							{{#admin}}
							<button type="button" class="btn btn-primary"
								onclick="editarObra();" id="editar">Editar</button>
							<button type="submit" class="btn btn-primary"
								style="display: none;" id="guardar" onclick="update();">Guardar</button>
							<button type="submit" class="btn btn-primary"
								onclick="borrarObra(); return confirm('¿Está seguro de borrar el item?')"
								id="borrar">Borrar</button>
							{{/admin}} <input type="hidden" name="_csrf" value="{{token}}" />
						</form>
						<script>
							function editarObra() {
								//document.getElementById("editar").type = 'submit';
								//document.getElementById("editar").onclick=function() {};
								document.getElementById("url").disabled = false;
								document.getElementById("date").disabled = false;
								document.getElementById("editorial").disabled = false;
								document.getElementById("urlEdi").disabled = false;
								document.getElementById("editar").style.display = 'none';
								document.getElementById("guardar").style.display = 'inline';
								//document.getElementById("showActor").method = 'post';
							}
						</script>
						<script>
							function update() {
								//document.getElementById("editar").type = 'submit';
								//document.getElementById("editar").onclick=function() {};
								document.getElementById("title").disabled = false;
								document.getElementById("editarObras").action = 'edit';
								document.getElementById("editarObras").method = 'post';
								//document.getElementById("showActor").method = 'post';
							}
						</script>
						<script>
							function borrarObra() {
								//document.getElementById("editar").type = 'submit';
								//document.getElementById("editar").onclick=function() {};
								document.getElementById("title").disabled = false;
								document.getElementById("editarObras").action = 'borrar';
								document.getElementById("editarObras").method = 'post';
								//document.getElementById("showActor").method = 'post';
							}
						</script>
						<!--End Form-->
					</div>
				</div>
			</div>
			<!--End Input Data-->

			<!--Input Images-->
			<div class="col-md-2">


				<div class="card card-profile">
					<div class="card-avatar-top">
						<img class="card-img-top" src="{{URL}}"
							style="width: 11.65em; height: 10em;" />
					</div>
					<div class="card-body">

						<h4 class="card-title">Portada</h4>
					</div>
				</div>


				<div class="card card-profile">
					<div class="card-avatar-top">
						<img class="card-img-top" src="{{url_editorial}}"
							style="width: 11.65em; height: 10em;" />
					</div>
					<div class="card-body">

						<h4 class="card-title">Editorial</h4>
					</div>
				</div>


			</div>
			<!--End Input Images-->
		</div>
	</div>
	<!-- End Data Container -->

	<div class="span12">
		<hr>
	</div>

	<!-- Container parts : Theme, Author, Quote-->
	<div class="container-fluid">

		<div class="row">
			<!--Start Theme-->
			<div class="col-sm-4"
				style="width: auto; height: 30em; overflow-y: scroll;">
				<div class="card" style="height: auto">
					<div class="card-header card-header-primary">
						<h4 class="card-title text-center">Temas</h4>
					</div>
					<div class="card-body">

						<div class="row">
							{{#temas}}
							<div class="col-sm-6">
								<div class="card">
									<div class="card-header  card-header-text card-header-primary">
										<a href="/temashow/{{contenido}}">
										<div class="card-text">
											<h5 class="card-title ">Tema {{-index}}</h5>
										</div>
										</a>
									</div>
									<div class="card-body">
										<a href="../tema/{{contenido}}"> <!-- Theme 2 Content -->
											<p>{{contenido}}</p>
										</a>
									</div>
								</div>
							</div>
							{{/temas}}
						</div>


					</div>
				</div>
			</div>
			<!-- End Theme-->

			<!-- Start Quote-->
			<div class="col-sm-4"
				style="width: auto; height: 30em; overflow-y: scroll;">
				<div class="card" style="height: auto">
					<div class="card-header  card-header-primary">

						<h4 class="card-title text-center">Citas</h4>

					</div>
					<div class="card-body">
						<div class="row">
							{{#citas}}
							<div class="col-sm-6">
								<div class="card">
									<div class="card-header  card-header-text card-header-primary">
										<div class="card-text">
											<h5 class="card-title ">Cita {{-index}}</h5>
										</div>
									</div>
									<div class="card-body">
										<!-- Quote Content -->
										<div class="row">
											<div class="col-sm-12">
												<p>{{contenido}}</p>
											</div>
										</div>
										<form action="obra/borrarCita/{{contenido}}" method="post">
										<div class="row">
											<div class="col-sm-12">
													<input type="hidden" name="_csrf" value="{{token}}" /> <input
														type="hidden" name="contenido" value="{{contenido}}" />
												<p class="d-flex">
												{{#admin}}
													<button type="button"
														class="btn btn-info ml-auto btn-round"
														onclick="return confirm('¿Está seguro de borrar el item?')">
														<i class="material-icons"> delete </i>
													</button>{{/admin}}
												</p>
											</div>
										</div>
										</form>
									</div>
								</div>
							</div>
							{{/citas}}

						</div>
						<form action="/obra/{{nombreObra}}/cita" method="post">
							<p class="d-flex">
								<label class="bmd-label-floating"> Agregar Cita: </label> <input
									type='text' class="form-control" name='contenido' />
									{{#admin}}
								<button type="submit" class="btn btn-info ml-auto btn-round">
									<i class="material-icons"> add_circle </i>
								</button>{{/admin}}
							</p>
							<input type="hidden" name="_csrf" value="{{token}}" />
						</form>
						<!-- Add button -->

					</div>
				</div>
			</div>
			<!-- End Quote-->
			<!-- Start Author-->
			<div class="col-sm-4"
				style="width: auto; height: 30em; overflow-y: scroll;">
				<div class="card" style="height: auto">
					<div class="card-header  card-header-primary">

						<h4 class="card-title text-center">Autores</h4>

					</div>
					<div class="card-body">
						<!-- Search bar-->
						<form class="navbar-form">
							<div class="input-group no-border">
								<input type="text" value="" class="form-control"
									placeholder="Buscar Autor...">
								<button type="submit"
									class="btn btn-white btn-round btn-just-icon">
									<i class="material-icons">search</i>
									<div class="ripple-container"></div>
								</button>
							</div>
						</form>
						<!-- End Search bar-->
						<div class="row">
							{{#autores}}
							<div class="col-sm-6">
								<div class="card">
									<div class="card-header  card-header-text card-header-primary">
									<a href="/autorshow/{{nombre}}">
										<div class="card-text">
											<h5 class="card-title ">Autor {{-index}}</h5>
										</div>
										</a>
									</div>
									<div class="card-body">
										<!-- Author 1 Content -->
										<div class="row">
											<a href="../autor/{{nombre}}">
												<div class="col-sm-12">
													<p>{{nombre}}</p>
												</div>
											</a>
										</div>
										<div class="row">
											<div class="col-sm-12">
												{{#admin}}
												<form action="obra/borrarAutor/{{nombre}}" method="post">
													<input type="hidden" name="_csrf" value="{{token}}" /> <input
														type="hidden" name="nombre" value="{{nombre}}" />
												<p class="d-flex">
													<button type="button"
														class="btn btn-info ml-auto btn-round"
														onclick="return confirm('¿Está seguro de borrar el item?')">
														<i class="material-icons"> delete </i>
													</button>
												</p>
												</form>
												{{/admin}}
											</div>
										</div>
									</div>
								</div>
							</div>
							{{/autores}}

						</div>
						{{#admin}}
						<form action="../autor/new" method="post">
							<input type="hidden" name="_csrf" value="{{token}}" />
							<p class="d-flex">
								<button type="submit" class="btn btn-info ml-auto btn-round">
									<i class="material-icons"> add_circle </i>
								</button>
							</p>
						</form>
						<!-- Add button -->
						{{/admin}}
					</div>
				</div>
			</div>
			<!-- End Author-->

		</div>
	</div>
</div>

<!-- End Container parts-->


{{>footer}}
</div>



<!--   Core JS Files   -->
<script src="../assets/js/core/jquery.min.js"></script>
<script src="../assets/js/core/popper.min.js"></script>
<script src="../assets/js/core/bootstrap-material-design.min.js"></script>
<script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<!-- Plugin for the momentJs  -->
<script src="../assets/js/plugins/moment.min.js"></script>
<!--  Plugin for Sweet Alert -->
<script src="../assets/js/plugins/sweetalert2.js"></script>
<!-- Forms Validations Plugin -->
<script src="../assets/js/plugins/jquery.validate.min.js"></script>
<!-- Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script src="../assets/js/plugins/jquery.bootstrap-wizard.js"></script>
<!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
<script src="../assets/js/plugins/bootstrap-selectpicker.js"></script>
<!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script src="../assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
<!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
<script src="../assets/js/plugins/jquery.dataTables.min.js"></script>
<!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script src="../assets/js/plugins/bootstrap-tagsinput.js"></script>
<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script src="../assets/js/plugins/jasny-bootstrap.min.js"></script>
<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
<script src="../assets/js/plugins/fullcalendar.min.js"></script>
<!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
<script src="../assets/js/plugins/jquery-jvectormap.js"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="../assets/js/plugins/nouislider.min.js"></script>
<!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
<!-- Library for adding dinamically elements -->
<script src="../assets/js/plugins/arrive.min.js"></script>
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!-- Chartist JS -->
<script src="../assets/js/plugins/chartist.min.js"></script>
<!--  Notifications Plugin    -->
<script src="../assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
<script src="../assets/js/material-dashboard.js?v=2.1.1"
	type="text/javascript"></script>
<!-- Material Dashboard DEMO methods, don't include it in your project! -->
<script src="../assets/demo/demo.js"></script>
<script>
	$(document)
			.ready(
					function() {
						$()
								.ready(
										function() {
											$sidebar = $('.sidebar');

											$sidebar_img_container = $sidebar
													.find('.sidebar-background');

											$full_page = $('.full-page');

											$sidebar_responsive = $('body > .navbar-collapse');

											window_width = $(window).width();

											fixed_plugin_open = $(
													'.sidebar .sidebar-wrapper .nav li.active a p')
													.html();

											if (window_width > 767
													&& fixed_plugin_open == 'Dashboard') {
												if ($('.fixed-plugin .dropdown')
														.hasClass(
																'show-dropdown')) {
													$('.fixed-plugin .dropdown')
															.addClass('open');
												}

											}

											$('.fixed-plugin a')
													.click(
															function(event) {
																// Alex if we click on switch, stop propagation of the event, so the dropdown will not be hide, otherwise we set the  section active
																if ($(this)
																		.hasClass(
																				'switch-trigger')) {
																	if (event.stopPropagation) {
																		event
																				.stopPropagation();
																	} else if (window.event) {
																		window.event.cancelBubble = true;
																	}
																}
															});

											$(
													'.fixed-plugin .active-color span')
													.click(
															function() {
																$full_page_background = $('.full-page-background');

																$(this)
																		.siblings()
																		.removeClass(
																				'active');
																$(this)
																		.addClass(
																				'active');

																var new_color = $(
																		this)
																		.data(
																				'color');

																if ($sidebar.length != 0) {
																	$sidebar
																			.attr(
																					'data-color',
																					new_color);
																}

																if ($full_page.length != 0) {
																	$full_page
																			.attr(
																					'filter-color',
																					new_color);
																}

																if ($sidebar_responsive.length != 0) {
																	$sidebar_responsive
																			.attr(
																					'data-color',
																					new_color);
																}
															});

											$(
													'.fixed-plugin .background-color .badge')
													.click(
															function() {
																$(this)
																		.siblings()
																		.removeClass(
																				'active');
																$(this)
																		.addClass(
																				'active');

																var new_color = $(
																		this)
																		.data(
																				'background-color');

																if ($sidebar.length != 0) {
																	$sidebar
																			.attr(
																					'data-background-color',
																					new_color);
																}
															});

											$('.fixed-plugin .img-holder')
													.click(
															function() {
																$full_page_background = $('.full-page-background');

																$(this)
																		.parent(
																				'li')
																		.siblings()
																		.removeClass(
																				'active');
																$(this)
																		.parent(
																				'li')
																		.addClass(
																				'active');

																var new_image = $(
																		this)
																		.find(
																				"img")
																		.attr(
																				'src');

																if ($sidebar_img_container.length != 0
																		&& $('.switch-sidebar-image input:checked').length != 0) {
																	$sidebar_img_container
																			.fadeOut(
																					'fast',
																					function() {
																						$sidebar_img_container
																								.css(
																										'background-image',
																										'url("'
																												+ new_image
																												+ '")');
																						$sidebar_img_container
																								.fadeIn('fast');
																					});
																}

																if ($full_page_background.length != 0
																		&& $('.switch-sidebar-image input:checked').length != 0) {
																	var new_image_full_page = $(
																			'.fixed-plugin li.active .img-holder')
																			.find(
																					'img')
																			.data(
																					'src');

																	$full_page_background
																			.fadeOut(
																					'fast',
																					function() {
																						$full_page_background
																								.css(
																										'background-image',
																										'url("'
																												+ new_image_full_page
																												+ '")');
																						$full_page_background
																								.fadeIn('fast');
																					});
																}

																if ($('.switch-sidebar-image input:checked').length == 0) {
																	var new_image = $(
																			'.fixed-plugin li.active .img-holder')
																			.find(
																					"img")
																			.attr(
																					'src');
																	var new_image_full_page = $(
																			'.fixed-plugin li.active .img-holder')
																			.find(
																					'img')
																			.data(
																					'src');

																	$sidebar_img_container
																			.css(
																					'background-image',
																					'url("'
																							+ new_image
																							+ '")');
																	$full_page_background
																			.css(
																					'background-image',
																					'url("'
																							+ new_image_full_page
																							+ '")');
																}

																if ($sidebar_responsive.length != 0) {
																	$sidebar_responsive
																			.css(
																					'background-image',
																					'url("'
																							+ new_image
																							+ '")');
																}
															});

											$('.switch-sidebar-image input')
													.change(
															function() {
																$full_page_background = $('.full-page-background');

																$input = $(this);

																if ($input
																		.is(':checked')) {
																	if ($sidebar_img_container.length != 0) {
																		$sidebar_img_container
																				.fadeIn('fast');
																		$sidebar
																				.attr(
																						'data-image',
																						'#');
																	}

																	if ($full_page_background.length != 0) {
																		$full_page_background
																				.fadeIn('fast');
																		$full_page
																				.attr(
																						'data-image',
																						'#');
																	}

																	background_image = true;
																} else {
																	if ($sidebar_img_container.length != 0) {
																		$sidebar
																				.removeAttr('data-image');
																		$sidebar_img_container
																				.fadeOut('fast');
																	}

																	if ($full_page_background.length != 0) {
																		$full_page
																				.removeAttr(
																						'data-image',
																						'#');
																		$full_page_background
																				.fadeOut('fast');
																	}

																	background_image = false;
																}
															});

											$('.switch-sidebar-mini input')
													.change(
															function() {
																$body = $('body');

																$input = $(this);

																if (md.misc.sidebar_mini_active == true) {
																	$('body')
																			.removeClass(
																					'sidebar-mini');
																	md.misc.sidebar_mini_active = false;

																	$(
																			'.sidebar .sidebar-wrapper, .main-panel')
																			.perfectScrollbar();

																} else {

																	$(
																			'.sidebar .sidebar-wrapper, .main-panel')
																			.perfectScrollbar(
																					'destroy');

																	setTimeout(
																			function() {
																				$(
																						'body')
																						.addClass(
																								'sidebar-mini');

																				md.misc.sidebar_mini_active = true;
																			},
																			300);
																}

																// we simulate the window Resize so the charts will get updated in realtime.
																var simulateWindowResize = setInterval(
																		function() {
																			window
																					.dispatchEvent(new Event(
																							'resize'));
																		}, 180);

																// we stop the simulation of Window Resize after the animations are completed
																setTimeout(
																		function() {
																			clearInterval(simulateWindowResize);
																		}, 1000);

															});
										});
					});
</script>
</body>

</html>
